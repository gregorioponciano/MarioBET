<template>
  <div class="loading" :style="`background-color: ${options.bg};`" v-show="isLoading" ref="loading">
    <template v-if="options.slot">
      <div v-html="options.slot"></div>
    </template>
    <template v-else>
      <i
        class="fa-spin"
        :class="`${options.icon} fa-${options.size}x`"
        :style="`color: ${options.icon_color}`"
      ></i>
      <span class="sr-only">Loading...</span>
    </template>
  </div>
</template>

<script setup>
import {ref} from 'vue'

let isLoading = ref(false)
let options = ref({
  bg: "#41b883ad",
  icon: null,
  size: "3",
  icon_color: "#ffffff",
  slot: null
})

const changeStatus = (payload) => {
  isLoading.value = payload
}

const changeIsLoadingOptions = (newOptions) => {
  Object.keys(options.value).forEach((key) => {
    if (newOptions[key]) {
      options['value'][key] = newOptions[key]
    }
  })
}

defineExpose({
  changeStatus,
  changeIsLoadingOptions
})
</script>

<style scoped>
.loading {
  position: fixed;
  left: 0;
  top: 0;
  right: 0;
  bottom: 0;
  height: 100vh;
  z-index: 99999 !important;
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
}
.loading i {
  position: absolute;
  opacity: 1;
}
</style>